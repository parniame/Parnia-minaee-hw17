@model dynamic;




<div class="container">
    <div class="col">

        <div class="row">
            <table>
                <thead>
                    <tr>
                        <th>
                            Order ID
                        </th>

                        <th>
                            First Name
                        </th>
                        <th>
                            Last Name
                        </th>
                        <th>
                            Address
                        </th>
                        <th>
                            Phone
                        </th>
                        <th>
                            Order Date
                        </th>
                        <th>
                            Required Date
                        </th>
                        <th>
                            Shipping Date
                        </th>
                        <th>
                            Staff First Name
                        </th>
                        <th>
                            Staff Last Name
                        </th>

                    </tr>
                </thead>
                <tbody>
                    @foreach (var order in Model.Orders)
                    { 
                        
                        <tr>
                            <td>@order.Id</td>
                            <td>@order.FirstName</td>
                            <td>@order.LastName</td>
                            <td>@order.Address</td>
                            <td>@order.Phone</td>
                            <td>@order.Date</td>
                            <td>@order.RequiredDate</td>
                            <td>@order.ShippingDate</td>
                            <td>@order.StaffFirstName</td>
                            <td>@order.StaffLastName</td>
                            @* Button to Open the Modal  *@
                            @* asp-action="GetOrderDetails" asp-controller="Store" asp-route-orderId=@order.Id *@
                            <td>
                                <button  type="submit" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
                                    Order Details
                                </button>
                            </td>
                            


                        </tr>
                    }
                </tbody>

            </table>

        </div>
        <div class="row">
            @* The Modal  *@
            <div class="modal" id="myModal">
                <div class="modal-lg">
                    <div class="modal-content">

                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Order Details</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>

                        </div>

                        <!-- Modal body -->
                        <div class="modal-body">
                            <table>
                                <thead>
                                    <tr>
                                        <th>
                                            Product ID
                                        </th>

                                        <th>
                                            Product Name
                                        </th>
                                        <th>
                                            Quantity
                                        </th>
                                        <th>
                                            ListPrice
                                        </th>
                                        <th>
                                            Discount
                                        </th>
                                        
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var detail in Model.Details)
                                    {

                                        <tr>
                                            <td>@detail.ProductId</td>
                                            <td>@detail.ProductName</td>
                                            <td>@detail.Quantity</td>
                                            <td>@detail.ListPrice</td>
                                            <td>@detail.Discount</td>
                                                                                   
                                        </tr>
                                    }
                                </tbody>

                            </table>


                            <p>Total Price: @Model.totalCost</p>
                        </div>

                        @* Modal footer  *@
                        <div class="modal-footer">
                           
                            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="row ">
            <form asp-controller="Store" asp-action="GetOrder" class="my-4">
                <div class="form-group my-3">
                    <label for="staffID">Order ID</label>

                    <input name="orderID" type="text" pattern="^\d+$" title="Only positive integer" class="form-control" id="staffID" placeholder="Search by Store ID">


                </div>
                <button type="submit" class="btn btn-primary">Search</button>


            </form>
        </div>
    </div>
</div>

